<%= turbo_frame_tag dom_id(@provider, :buckets) do %>
  <% if @error %>
    <div class="px-4 py-6 text-center">
      <svg class="mx-auto size-10 text-red-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" />
      </svg>
      <p class="mt-2 text-sm text-red-600"><%= @error %></p>
      <%= link_to "Retry", provider_buckets_path(@provider), data: { turbo_frame: dom_id(@provider, :buckets) }, class: "mt-3 inline-block text-sm font-medium text-blue-600 hover:text-blue-500" %>
    </div>
  <% elsif @buckets.empty? %>
    <div class="px-4 py-6 text-center">
      <p class="text-sm text-gray-500">No buckets found for this provider.</p>
    </div>
  <% else %>
    <ul role="list" class="divide-y divide-gray-100">
      <% @buckets.each do |bucket_name| %>
        <li class="flex items-center justify-between gap-x-6 px-4 py-4 sm:px-6">
          <div class="min-w-0">
            <p class="text-sm font-medium text-gray-900 font-mono"><%= bucket_name %></p>
          </div>
          <% if @provider.bucket_imported?(bucket_name) %>
            <span class="inline-flex items-center rounded-md bg-green-50 px-2 py-1 text-xs font-medium text-green-700 ring-1 ring-inset ring-green-600/20">
              Imported
            </span>
          <% else %>
            <%= button_to "Import", provider_buckets_path(@provider, bucket_name: bucket_name), method: :post, class: "rounded bg-blue-600 px-2 py-1 text-xs font-semibold text-white shadow-sm hover:bg-blue-500" %>
          <% end %>
        </li>
      <% end %>
    </ul>
  <% end %>
<% end %>
